<div role="form">
  <div class="modal-header">
    <h3>Login</h3>
  </div>
  <div class="modal-body" stop-event="touchend">
    <form ng:submit="login()" class="form-horizontal" role="form" novalidate>
      <div ng:show="login.failed" ng:switch="login.failed" class="alert alert-danger">
        <div ng:switch:when="noaccount">
          There is no account with the email address you entered. Please <a ng:click="close(); register()">sign up</a>.
        </div>
        <div ng:switch:when="unverified">
          You must verify your email address before logging in. Please check your inbox for a verification message. If it has not arrived, you may <a ng:click="resendVerification()">resend</a> it.
        </div>
        <div ng:switch:when="password">
          The password you entered is incorrect. <a ng:click="close(); resetPasswd()">Forgot your password?</a>
        </div>
        <div ng:switch:default>
          The server encountered an an error while trying to log you in. Please try again.
        </div>
      </div>
      <div class="alert alert-info"><strong>Don't have an account?</strong> <a ng:click="close(); register()">Sign up!</a></div>
      <div class="form-group">
        <label for="email" class="col-sm-3 control-label">Email address</label>
        <div class="col-sm-9">
          <input id="email" type="email" class="form-control" safe-input="login.getEmail" ng:model="login.email" placeholder="Email address" autofocus />
        </div>
      </div>
      <div class="form-group">
        <label for="password" class="col-sm-3 control-label">Password</label>
        <div class="col-sm-9">
          <input id="password" type="password" class="form-control" safe-input="login.getPassword"  ng:model="login.password" placeholder="Password" />
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-9 col-sm-offset-3">
          <a ng:click="close(); resetPasswd()">Forgot your password?</a>
        </div>
      </div>
      <input type="submit" style="position: absolute; z-index: -9999">
    </form>
  </div>
  <div class="modal-footer">
    <p><small>By signing in, you agree to the <a href="/terms" ng:click="close()">Terms of Service</a> and the <a href="/privacy" ng:click="close()">Privacy Policy</a>.</small></p>
    <button class="btn btn-primary" ng:click="login()">Sign In</button>
    <button class="btn btn-warning" ng:click="close()">Cancel</button>
  </div>
</div>
